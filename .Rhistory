<<<<<<< HEAD
bowling_analysis <- function(player_name) {
overs = ipl::overs(player_name)
#maiden overs naming
firstname_letter = substr(stringr::word(player_name, 1), 1, 1)
surname = stringr::word(player_name, 2)
player_name_MO = paste(firstname_letter, surname)
maiden_overs = maiden_overs(player_name_MO)
runs = ipl::runs(player_name)
wickets_taken = ipl::wickets_taken(player_name)
bowling_analysis = paste(overs, "-", maiden_overs, "-",runs, "-", wickets_taken)
output_df <- data.frame(player, overs, maiden_overs, runs, wickets_taken, bowling_analysis)
return(output_df)
=======
dplyr::ungroup() %>%
dplyr::group_by(batsman) %>%
dplyr::summarise(
centuries = sum(cents),
half_centuries = sum(half_cents)
)
>>>>>>> b2017b6a1d82ce6a5fdea4240d27f88bc49b79e2
}
bowling_analysis("Rahul Sharma")
#' @examples
#'
#' library(ipl)
#'
#' # Summarises the bowling analysis for Rahul Sharma
#' bowling_analysis("Rahul Sharma")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
bowling_analysis <- function(player_name) {
overs = ipl::overs(player_name)
#maiden overs naming
firstname_letter = substr(stringr::word(player_name, 1), 1, 1)
surname = stringr::word(player_name, 2)
player_name_MO = paste(firstname_letter, surname)
maiden_overs = ipl::maiden_overs(player_name_MO)
runs = ipl::runs(player_name)
wickets_taken = ipl::wickets_taken(player_name)
bowling_analysis = paste(overs, "-", maiden_overs, "-",runs, "-", wickets_taken)
output_df <- data.frame(batsman, overs, maiden_overs, runs, wickets_taken, bowling_analysis)
return(output_df)
}
bowling_analysis("Rahul Sharma")
library(ipl)
bowling_analysis("Rahul Sharma")
#' @examples
#'
#' library(ipl)
#'
#' # Summarises the bowling analysis for Rahul Sharma
#' bowling_analysis("Rahul Sharma")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
bowling_analysis <- function(player_name) {
overs = ipl::overs(player_name)
#maiden overs naming
firstname_letter = substr(stringr::word(player_name, 1), 1, 1)
surname = stringr::word(player_name, 2)
player_name_MO = paste(firstname_letter, surname)
maiden_overs = ipl::maiden_overs(player_name_MO)
runs = ipl::runs(player_name)
wickets_taken = ipl::wickets_taken(player_name)
bowling_analysis = paste(overs, "-", maiden_overs, "-",runs, "-", wickets_taken)
output_df <- data.frame(player_name, overs, maiden_overs, runs, wickets_taken, bowling_analysis)
return(output_df)
}
bowling_analysis("Rahul Sharma")
bat_avg("V Kohli")
bat_avg("V Kohli", 2016)
#' @examples
#'
#' library(ipl)
#'
#' # Summarises the bowling analysis for Rahul Sharma
#' bowling_analysis("Rahul Sharma")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
bowling_analysis <- function(player_name) {
overs = ipl::overs(player_name)
#maiden overs naming
firstname_letter <- substr(stringr::word(player_name, 1), 1, 1)
surname <- stringr::word(player_name, 2)
player_name_MO <- paste(firstname_letter, surname)
maiden_overs <- ipl::maiden_overs(player_name_MO)
runs <- ipl::runs(player_name)
wickets_taken <- ipl::wickets_taken(player_name)
bowling_analysis <- paste(overs, "-", maiden_overs, "-",runs, "-", wickets_taken)
batsman <- player_name
output_df <- data.frame(batsman, overs, maiden_overs, runs, wickets_taken, bowling_analysis)
return(output_df)
}
#' @examples
#'
#' library(ipl)
#'
#' # Summarises the bowling analysis for Rahul Sharma
#' bowling_analysis("Rahul Sharma")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
bowling_analysis <- function(player_name) {
overs = ipl::overs(player_name)
#maiden overs naming
firstname_letter <- substr(stringr::word(player_name, 1), 1, 1)
surname <- stringr::word(player_name, 2)
player_name_MO <- paste(firstname_letter, surname)
maiden_overs <- ipl::maiden_overs(player_name_MO)
runs <- ipl::runs(player_name)
wickets_taken <- ipl::wickets_taken(player_name)
bowling_analysis <- paste(overs, "-", maiden_overs, "-",runs, "-", wickets_taken)
bowler <- player_name
output_df <- data.frame(bowler, overs, maiden_overs, runs, wickets_taken, bowling_analysis)
return(output_df)
}
bowling_analysis("Rahul Sharma")
#' @examples
#'
#' library(ipl)
#'
#' # Summarises the bowling analysis for Rahul Sharma
#' bowling_analysis("Rahul Sharma")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
bowling_analysis <- function(player_name) {
overs = ipl::overs(player_name)
#maiden overs naming
firstname_letter <- substr(stringr::word(player_name, 1), 1, 1)
surname <- stringr::word(player_name, 2)
player_name_MO <- paste(firstname_letter, surname)
maiden_overs <- ipl::maiden_overs(player_name_MO)
runs <- ipl::runs(player_name)
wickets_taken <- ipl::wickets_taken(player_name)
bowling_analysis <- paste0(overs, "-", maiden_overs, "-",runs, "-", wickets_taken)
bowler <- player_name
output_df <- data.frame(bowler, overs, maiden_overs, runs, wickets_taken, bowling_analysis)
return(output_df)
}
bowling_analysis("Rahul Sharma")
library(ipl)
library(ipl)
batsman_summary("V Kohli")
test_that("check for invalid input", {
expect_error(batsman_summary(99),
regexp = "should be a character")
})
length(batsman_summary("V Kohli"))
styler:::style_selection()
library(ipl)
bowler_summary()
test_that("check bowler summary", {
expect_identical(df, bowler_summary())
})
df <- data.frame(
"statistic" = c("Most Overs", "Most Runs", "Most Wickets", "Most Matches", "Most Innings"),
"bowler" = c("Harbhajan Singh", "Piyush Chawla", "Lasith Malinga", "Suresh Raina", "Harbhajan Singh"),
"value" = c(562.2, 4072.0, 170.0, 193.0, 157.0)
)
test_that("check bowler summary", {
expect_identical(df, bowler_summary())
})
library(ipl)
library(ipl)
View(deliveries)
bowling_analysis("Rahul Sharma")
library(ipl)
deliveries %>% filter(str_detect(bowler, "Sharma"))
library(stringr)
library(dplyr)
deliveries %>% filter(str_detect(bowler, "Sharma"))
deliveries %>% filter(str_detect(bowler, "Sharma")) %>% unique(bowler)
deliveries %>% filter(str_detect(bowler, "Sharma")) %>% select(bowler) %>% distinct()
df <- data.frame(
"bowler" = "Rahul Sharma",
"overs" = 154.4,
"runs" = 1086,
"wickets_taken" = 40
)
batsman_summary <- function(player) {
if (!(is.character(player))) {
stop(paste0("Invalid input: ", player, " should be a character vector"), call. = FALSE)
} else if (!(player %in% deliveries$batsman)) {
stop(paste0(player, " not found!"), call. = FALSE)
} else {
ipl::bat_avg(player, 2008:2020) %>%
left_join(map2_df(player, 2008:2020, ipl::bat_max), by = c("batsman", "year")) %>%
left_join(map2_df(player, 2008:2020, ipl::strike_rate), by = c("batsman", "year")) %>%
left_join(map2_df(player, 2008:2020, ipl::cents_halfcents), by = c("batsman", "year")) %>%
left_join(map2_df(player, 2008:2020, ipl::fours), by = c("batsman", "year")) %>%
left_join(map2_df(player, 2008:2020, ipl::sixes), by = c("batsman", "year")) %>%
select(-batsman) %>%
arrange(desc(year))
}
}
test_that("check bowling analysis", {
expect_identical(df, bowling_analysis("Rahul Sharma"))
})
test_that("check for when data not found", {
expect_error(bowling_analysis("Sharma"),regexp = "input another name")
expect_error(bowling_analysis("Rahul"),regexp = "input another name")
})
bowling_analysis("Rahul Sharma")
#' library(ipl)
#'
#' # Summarises the bowling analysis for Rahul Sharma
#' bowling_analysis("Rahul Sharma")
#' @importFrom magrittr "%>%"
#' @import dplyr
#' @importFrom stringr word
#'
#' @export
#'
bowling_analysis <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% bowlers_100$player)) {
stop("Invalid player name, please input another name")
}
#maiden overs naming
firstname_letter <- substr(word(player_name, 1), 1, 1)
surname <- word(player_name, 2)
player_name_MO <- paste(firstname_letter, surname)
overs <- ipl::overs(player_name)
runs <- ipl::runs(player_name)
wickets_taken <- ipl::wickets_taken(player_name)
bowler <- player_name
output_df <- data.frame(bowler, overs, runs, wickets_taken)
return(output_df)
}
test_that("check bowling analysis", {
expect_identical(df, bowling_analysis("Rahul Sharma"))
})
library(ipl)
library(ipl)
styler:::style_selection()
library(ipl)
test_that("calculate maiden overs", {
expect_equal(2, maiden_overs("R Sharma"))
expect_equal(3, maiden_overs("S Kaul"))
})
maiden_overs("R Sharma")
#'
#' library(ipl)
#'
#' # Calculates the maiden overs for Rahul Sharma
#' maiden_overs("Harbhajan Singh")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
#'
maiden_overs <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% deliveries$player)) {
stop("Invalid player name, please input another name. Make sure the player `Rahul Sharma ` is denoted as `R Sharma`.")
if (!(player_name %in% deliveries$batsman)) {
stop("Invalid player name, please input another name.")
}
maiden_overs_df <- deliveries %>%
select(id, ball, batsman, bowler, batsman_runs) %>%
filter(batsman_runs == 0, bowler == player_name)
ballcount <- 1
maiden_over <- 0
for (ballnum in maiden_overs_df$ball) {
if (ballcount == ballnum) {
ballcount <- ballcount + 1
if (ballcount == 6) {
maiden_over <- maiden_over + 1
}
} else {
ballcount <- 1
}
}
return(maiden_over)
}
}
test_that("calculate maiden overs", {
expect_equal(2, maiden_overs("R Sharma"))
expect_equal(3, maiden_overs("S Kaul"))
})
maiden_overs("R Sharma")
#'
#' library(ipl)
#'
#' # Calculates the maiden overs for Rahul Sharma
#' maiden_overs("Harbhajan Singh")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
#'
maiden_overs <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% deliveries$batsman)) {
stop("Player not found")
if (!(player_name %in% deliveries$batsman)) {
stop("Invalid player name, please input another name.")
}
maiden_overs_df <- deliveries %>%
select(id, ball, batsman, bowler, batsman_runs) %>%
filter(batsman_runs == 0, bowler == player_name)
ballcount <- 1
maiden_over <- 0
for (ballnum in maiden_overs_df$ball) {
if (ballcount == ballnum) {
ballcount <- ballcount + 1
if (ballcount == 6) {
maiden_over <- maiden_over + 1
}
} else {
ballcount <- 1
}
}
return(maiden_over)
}
}
test_that("calculate maiden overs", {
expect_equal(2, maiden_overs("R Sharma"))
expect_equal(3, maiden_overs("S Kaul"))
})
maiden_overs("Rahul Sharma")
maiden_overs("R Sharma")
source("~/Documents/Mithi/Smith/Spring 2022/SDS 270/Div II/ipl/R/maiden_overs.R", echo=TRUE)
#'
#' library(ipl)
#'
#' # Calculates the maiden overs for Rahul Sharma
#' maiden_overs("Harbhajan Singh")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
#'
maiden_overs <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% deliveries$batsman)) {
stop("Player not found")
if (!(player_name %in% deliveries$batsman)) {
stop("Invalid player name, please input another name.")
}
maiden_overs_df <- deliveries %>%
select(id, ball, batsman, bowler, batsman_runs) %>%
filter(batsman_runs == 0, bowler == player_name)
ballcount <- 1
maiden_over <- 0
for (ballnum in maiden_overs_df$ball) {
if (ballcount == ballnum) {
ballcount <- ballcount + 1
if (ballcount == 6) {
maiden_over <- maiden_over + 1
}
} else {
ballcount <- 1
}
}
#return(maiden_over)
}
}
maiden_overs("R Sharma")
#'
#' library(ipl)
#'
#' # Calculates the maiden overs for Rahul Sharma
#' maiden_overs("Harbhajan Singh")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
#'
maiden_overs <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% deliveries$batsman)) {
stop("Player not found")
if (!(player_name %in% deliveries$batsman)) {
stop("Invalid player name, please input another name.")
}
maiden_overs_df <- deliveries %>%
select(id, ball, batsman, bowler, batsman_runs) %>%
filter(batsman_runs == 0, bowler == player_name)
ballcount <- 1
maiden_over <- 0
for (ballnum in maiden_overs_df$ball) {
if (ballcount == ballnum) {
ballcount <- ballcount + 1
if (ballcount == 6) {
maiden_over <- maiden_over + 1
}
} else {
ballcount <- 1
}
}
}
return(maiden_over)
}
maiden_overs("R Sharma")
maiden_overs("R Sharma")
#'
#' library(ipl)
#'
#' # Calculates the maiden overs for Rahul Sharma
#' maiden_overs("Harbhajan Singh")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
#'
maiden_overs <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% deliveries$batsman)) {
stop("Player not found")
if (!(player_name %in% deliveries$batsman)) {
stop("Invalid player name, please input another name.")
}
maiden_overs_df <- deliveries %>%
select(id, ball, batsman, bowler, batsman_runs) %>%
filter(batsman_runs == 0, bowler == player_name)
ballcount <- 1
maiden_over <- 0
for (ballnum in maiden_overs_df$ball) {
if (ballcount == ballnum) {
ballcount <- ballcount + 1
if (ballcount == 6) {
maiden_over <- maiden_over + 1
}
} else {
ballcount <- 1
}
}
return(maiden_over)
}
return(maiden_over)
}
maiden_overs("R Sharma")
#'
#' library(ipl)
#'
#' # Calculates the maiden overs for Rahul Sharma
#' maiden_overs("Harbhajan Singh")
#' @importFrom magrittr "%>%"
#' @import dplyr
#'
#' @export
#'
maiden_overs <- function(player_name) {
if (!is.character(player_name)) {
stop(paste0("Invalid input: ", player_name, " must be a character"))
}
if (!(player_name %in% deliveries$batsman)) {
stop("Player not found")
if (!(player_name %in% deliveries$batsman)) {
stop("Invalid player name, please input another name.")
}
maiden_overs_df <- deliveries %>%
select(id, ball, batsman, bowler, batsman_runs) %>%
filter(batsman_runs == 0, bowler == player_name)
ballcount <- 1
maiden_over <- 0
for (ballnum in maiden_overs_df$ball) {
if (ballcount == ballnum) {
ballcount <- ballcount + 1
if (ballcount == 6) {
maiden_over <- maiden_over + 1
}
} else {
ballcount <- 1
}
}
return(maiden_over)
}
return(maiden_over)
}
maiden_overs("R Sharma")
deliveries %>% filter(batsman_runs == 0, extras_type %in% c("byes", "legbyes") | is.na(extras_type)) %>% group_by(over) %>% summarise(n = n())
library(lobstr)
obj_size(deliveries)
library(tidyverse)
obj_size(bat_avg)
obj_size(bat_max)
obj_size(batsman_summary())
obj_size(batsman_summary)
obj_size(bowler_score)
obj_size(bowler_summary)
obj_size(cents_halfcents)
obj_size(fours)
obj_size(sixes)
obj_size(overs_balls())
obj_size(overs_balls)
obj_size(overs)
obj_size(partnership_runs)
obj_size(runs)
obj_size(strike_rate)
obj_size(toss_choice)
obj_size(wickets_taken)
obj_size(winloss)
head(unique(deliveries$id))
deliveries %>% filter(id == 335984) %>% select(year, batting_team, bowling_team)
styler:::style_selection()
styler:::style_selection()
rlang::last_error()
library(ipl)
<<<<<<< HEAD
=======
library(readxl)
bowlers <- read_excel("~/Desktop/Top_100_bowlers.xlsx")
View(bowlers)
View(bowlers)
## Clean the Bowlers data
bowlers <- read_csv("data-raw/bowlers.csv")
library(tidyverse)
## Clean the Bowlers data
bowlers <- read_csv("data-raw/bowlers.csv")
bowlers$PLAYER <- trimws(gsub("[^[:alnum:]]", " ", bowlers$PLAYER))
bowlers %>%
janitor::clean_names()
bowler_score("Rahul Sharma")
cents_halfcents("V Kohli", 2016)
expect_equal(154.4, overs("Rahul Sharma"))
expect_equal(154.4, overs("Rahul Sharma"))
context("overs")
library(tibble)
library(dplyr)
library(dplyr)
load("/Volumes/GoogleDrive/My Drive/Smith College/Senior Year/ipl/data/bowlers.rda")
bowlers
source('/Volumes/GoogleDrive/My Drive/Smith College/Senior Year/ipl/tests/testthat/test_bowler_summary.R', echo=TRUE)
source('/Volumes/GoogleDrive/My Drive/Smith College/Senior Year/ipl/tests/testthat/test_bowler_summary.R', echo=TRUE)
bowling_analysis("Rahul Sharma")
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%"
)
remotes::install_github("Swaha294/ipl")
library(ipl)
bowling_analysis("Rahul Sharma")
>>>>>>> b2017b6a1d82ce6a5fdea4240d27f88bc49b79e2
